{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\n\nexport async function searchImj(query, page) {\n  const params = new URLSearchParams({\n    key: '44595659-f233d14b1d86ebf700a2637af',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 12,\n  });\n  try {\n    const res = await axios.get(``, { params });\n    return res.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(images) {\n  const gallery = document.getElementById(`gallery`);\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n\t\t\tclass=\"gallery-image\"\n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\t/>\n\t</a>\n  <div class=\"details\">\n  <p class=\"info\">Likes: <br>${likes}</p>\n  <p class=\"info\">Views: <br>${views}</p>\n  <p class=\"info\">Comments: <br>${comments}</p>\n  <p class=\"info\">Downloads: <br>${downloads}</p>\n</div>\n</li>\n`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox(`.gallery a`);\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImj } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nconst searchForm = document.getElementById(`search-form`);\nconst searchInput = document.getElementById(`search-input`);\nconst loader = document.getElementById(`loader`);\nconst btnLoadMore = document.querySelector('.btn-load');\nconst removeGallery = document.getElementById(`gallery`);\n// ===========================================================\nlet query = ``;\nlet page = 1;\nlet maxPage = 1;\nconst per_page = 12;\n// ===========================================================\nsearchForm.addEventListener(`submit`, async e => {\n  e.preventDefault();\n  showLoading();\n  query = searchInput.value.trim();\n  page = 1;\n\n  const data = await searchImj(query, page);\n  removeGallery.innerHTML = '';\n  searchForm.reset();\n\n  if (query === '') {\n    removeGallery.innerHTML = '';\n    iziToast.warning({\n      title: 'Warning!',\n      message: 'Please enter a search query',\n      position: 'center',\n    });\n\n    hideLoading();\n    hideLoadBtn();\n    return;\n  }\n\n  if (data.totalHits === 0) {\n    removeGallery.innerHTML = '';\n    iziToast.info({\n      title: 'No results',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'center',\n    });\n\n    hideLoading();\n    hideLoadBtn();\n    return;\n  }\n  try {\n    renderGallery(data.hits);\n    hideLoading();\n    updateBtnStatus();\n  } catch (error) {\n    console.error(error);\n  }\n});\n// ===========================================================\nbtnLoadMore.addEventListener('click', async () => {\n  page++;\n  hideLoadBtn();\n  showLoading();\n  try {\n    const data = await searchImj(query, page);\n    renderGallery(data.hits);\n    skipScrollElem();\n  } catch {\n    console.log('error');\n  }\n\n  hideLoading();\n  updateBtnStatus();\n});\n\n// ============================================================\n\nexport function showLoading() {\n  loader.classList.add(`loader`);\n}\n\nexport function hideLoading() {\n  loader.classList.remove(`loader`);\n}\n\nasync function updateBtnStatus() {\n  const data = await searchImj(query);\n  const totalHits = Number(data.totalHits);\n  maxPage = Math.ceil(totalHits / per_page);\n  if (page >= maxPage) {\n    hideLoadBtn();\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The End!',\n        message: 'End of collection!',\n        position: 'bottomCenter',\n      });\n    }\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction showLoadBtn() {\n  btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  btnLoadMore.classList.add('hidden');\n}\n\nfunction skipScrollElem() {\n  const liElem = removeGallery.children[0];\n  const scrollHeight = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: scrollHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","Axios","searchImj","query","page","params","error","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","searchInput","loader","btnLoadMore","removeGallery","maxPage","per_page","e","showLoading","data","iziToast","hideLoading","hideLoadBtn","updateBtnStatus","skipScrollElem","totalHits","showLoadBtn","scrollHeight"],"mappings":"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"}