{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\n\nexport async function searchImj(query, page) {\n  const params = new URLSearchParams({\n    key: '44595659-f233d14b1d86ebf700a2637af',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 12,\n  });\n\n  const res = await axios.get(``, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox(`.gallery a`);\n\nexport function renderGallery(images) {\n  const gallery = document.getElementById(`gallery`);\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n\t\t\tclass=\"gallery-image\"\n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\t/>\n\t</a>\n  <div class=\"details\">\n  <p class=\"info\">Likes: <br>${likes}</p>\n  <p class=\"info\">Views: <br>${views}</p>\n  <p class=\"info\">Comments: <br>${comments}</p>\n  <p class=\"info\">Downloads: <br>${downloads}</p>\n</div>\n</li>\n`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImj } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nconst searchForm = document.getElementById(`search-form`);\nconst searchInput = document.getElementById(`search-input`);\nconst loader = document.getElementById(`loader`);\nconst btnLoadMore = document.querySelector('.btn-load');\nconst removeGallery = document.getElementById(`gallery`);\n// ===========================================================\nlet query = ``;\nlet page = 1;\nlet maxPage = 1;\nlet data;\nconst per_page = 12;\n// ===========================================================\nsearchForm.addEventListener(`submit`, async e => {\n  e.preventDefault();\n  showLoading();\n  query = searchInput.value.trim();\n  page = 1;\n\n  if (query === '') {\n    removeGallery.innerHTML = '';\n    iziToast.warning({\n      title: 'Warning!',\n      message: 'Please enter a search query',\n      position: 'center',\n    });\n\n    hideLoading();\n    hideLoadBtn();\n    return;\n  }\n\n  try {\n    data = await searchImj(query, page);\n    removeGallery.innerHTML = '';\n    searchForm.reset();\n\n    if (data.totalHits === 0) {\n      removeGallery.innerHTML = '';\n      iziToast.info({\n        title: 'No results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n      });\n\n      hideLoading();\n      hideLoadBtn();\n      return;\n    }\n\n    renderGallery(data.hits);\n    hideLoading();\n    updateBtnStatus();\n  } catch (error) {\n    console.error(error);\n  }\n});\n// ===========================================================\nbtnLoadMore.addEventListener('click', async () => {\n  page++;\n  hideLoadBtn();\n  showLoading();\n  try {\n    data = await searchImj(query, page);\n    renderGallery(data.hits);\n    skipScrollElem();\n  } catch {\n    console.log('error');\n  }\n\n  hideLoading();\n  updateBtnStatus();\n});\n\n// ============================================================\n\nasync function updateBtnStatus() {\n  const totalHits = Number(data.totalHits);\n  maxPage = Math.ceil(totalHits / per_page);\n  if (page >= maxPage) {\n    hideLoadBtn();\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The End!',\n        message: 'End of collection!',\n        position: 'bottomCenter',\n      });\n    }\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction skipScrollElem() {\n  const liElem = removeGallery.children[0];\n  const scrollHeight = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: scrollHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport function showLoading() {\n  loader.classList.add(`loader`);\n}\n\nexport function hideLoading() {\n  loader.classList.remove(`loader`);\n}\n\nfunction showLoadBtn() {\n  btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  btnLoadMore.classList.add('hidden');\n}\n"],"names":["axios","Axios","searchImj","query","page","params","lightbox","SimpleLightbox","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","searchInput","loader","btnLoadMore","removeGallery","maxPage","data","per_page","e","showLoading","iziToast","hideLoading","hideLoadBtn","updateBtnStatus","error","skipScrollElem","totalHits","showLoadBtn","scrollHeight"],"mappings":"owBAEA,MAAMA,EAAQC,EAAM,OAAO,CACzB,QAAS,0BACX,CAAC,EAEM,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,CAAG,EAGD,OADY,MAAMJ,EAAM,IAAI,GAAI,CAAE,OAAAK,CAAM,CAAE,GAC/B,IACb,CChBA,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,iCACyBL,CAAa;AAAA;AAAA;AAAA,UAGpCD,CAAY;AAAA,UACZE,CAAI;AAAA;AAAA;AAAA;AAAA,+BAIiBC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA;AAAA,CAIvC,EACA,KAAK,EAAE,EAEVR,EAAQ,mBAAmB,YAAaC,CAAM,EAC9CL,EAAS,QAAO,CAClB,CClCA,MAAMa,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAc,SAAS,cAAc,WAAW,EAChDC,EAAgB,SAAS,eAAe,SAAS,EAEvD,IAAIpB,EAAQ,GACRC,EAAO,EACPoB,EAAU,EACVC,EACJ,MAAMC,EAAW,GAEjBP,EAAW,iBAAiB,SAAU,MAAMQ,GAAK,CAM/C,GALAA,EAAE,eAAc,EAChBC,IACAzB,EAAQiB,EAAY,MAAM,OAC1BhB,EAAO,EAEHD,IAAU,GAAI,CAChBoB,EAAc,UAAY,GAC1BM,EAAS,QAAQ,CACf,MAAO,WACP,QAAS,8BACT,SAAU,QAChB,CAAK,EAEDC,IACAC,IACA,MACD,CAED,GAAI,CAKF,GAJAN,EAAO,MAAMvB,EAAUC,EAAOC,CAAI,EAClCmB,EAAc,UAAY,GAC1BJ,EAAW,MAAK,EAEZM,EAAK,YAAc,EAAG,CACxBF,EAAc,UAAY,GAC1BM,EAAS,KAAK,CACZ,MAAO,aACP,QACE,2EACF,SAAU,QAClB,CAAO,EAEDC,IACAC,IACA,MACD,CAEDvB,EAAciB,EAAK,IAAI,EACvBK,IACAE,GACD,OAAQC,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAAC,EAEDX,EAAY,iBAAiB,QAAS,SAAY,CAChDlB,IACA2B,IACAH,IACA,GAAI,CACFH,EAAO,MAAMvB,EAAUC,EAAOC,CAAI,EAClCI,EAAciB,EAAK,IAAI,EACvBS,GACJ,MAAU,CACN,QAAQ,IAAI,OAAO,CACpB,CAEDJ,IACAE,GACF,CAAC,EAID,eAAeA,GAAkB,CAC/B,MAAMG,EAAY,OAAOV,EAAK,SAAS,EACvCD,EAAU,KAAK,KAAKW,EAAYT,CAAQ,EACpCtB,GAAQoB,GACVO,IAEIP,GACFK,EAAS,KAAK,CACZ,MAAO,WACP,QAAS,qBACT,SAAU,cAClB,CAAO,GAGHO,GAEJ,CAEA,SAASF,GAAiB,CAExB,MAAMG,EADSd,EAAc,SAAS,CAAC,EACX,sBAAqB,EAAG,OAEpD,SAAS,CACP,IAAKc,EAAe,EACpB,SAAU,QACd,CAAG,CACH,CAEO,SAAST,GAAc,CAC5BP,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASS,GAAc,CAC5BT,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASe,GAAc,CACrBd,EAAY,UAAU,OAAO,QAAQ,CACvC,CACA,SAASS,GAAc,CACrBT,EAAY,UAAU,IAAI,QAAQ,CACpC"}